<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>For Srushti ‚ù§Ô∏è</title>

<script type="module"
  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>

<style>
body{
  margin:0;
  font-family: Georgia, 'Times New Roman', serif;
  background:black;
  color:white;
  overflow:hidden;
}

/* ---------- SCENE TRANSITIONS ---------- */
.screen{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:20px;
  opacity:0;
  transform:translateY(30px);
  pointer-events:none;
  transition:opacity .6s ease, transform .6s ease;
}
.screen.active{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}
.screen.exit{
  opacity:0;
  transform:translateY(-30px);
}

button{
  margin:12px;
  padding:12px 26px;
  font-size:1rem;
  border:none;
  border-radius:30px;
  cursor:pointer;
  background:#ff2f6d;
  color:white;
  box-shadow:0 0 15px rgba(255,47,109,.6);
}

/* ---------- DIALOGUE ---------- */
.dialogue{
  max-width:320px;
  font-size:1.2rem;
  opacity:.9;
}

/* ---------- CUTSCENE ---------- */
#cutscene{
  background:radial-gradient(circle,#220010,#000);
}
#cutscene p{
  font-size:1.4rem;
  animation:fadeWalk 3s infinite;
}
@keyframes fadeWalk{
  0%{opacity:0;}
  50%{opacity:1;}
  100%{opacity:0;}
}

/* ---------- BOX ANIMATION ---------- */
#box-area{
  position:relative;
  width:160px;
  height:140px;
  margin-bottom:20px;
}
.box-base{
  position:absolute;
  bottom:0;
  width:100%;
  height:80px;
  background:#ff2f6d;
  border-radius:10px;
}
.box-lid{
  position:absolute;
  top:0;
  width:100%;
  height:40px;
  background:#ff5f8f;
  border-radius:10px;
  transform-origin:bottom center;
  transition:transform 1s ease;
}
#box-area.open .box-lid{
  transform:rotateX(120deg);
}
.glow{
  position:absolute;
  inset:-40px;
  background:radial-gradient(circle, rgba(255,47,109,.8), transparent 70%);
  opacity:0;
  transition:opacity 1s ease;
}
#box-area.open .glow{
  opacity:1;
}

/* ---------- INTRO ---------- */
#intro{
  background:radial-gradient(circle at top,#2a0015,#000);
}
#intro h1{
  color:#ff2f6d;
  text-shadow:0 0 15px rgba(255,47,109,.8);
}

/* ---------- CAMERA EXPERIENCE ---------- */
video{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  display:none;
}

model-viewer{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  display:none;
  --pulse-scale:1;
  transform:scale(var(--pulse-scale));
  transition:transform .15s ease-out;
}

/* ---------- FLOATING TEXT ---------- */
#love-text{
  position:fixed;
  bottom:18%;
  width:100%;
  text-align:center;
  font-size:2.2rem;
  color:#ff2f6d;
  text-shadow:0 0 12px rgba(255,47,109,.7);
  display:none;
}

/* ---------- MUSIC CONTROLS ---------- */
#music-btn{
  position:fixed;
  top:20px;
  right:20px;
  display:none;
}

#volume{
  position:fixed;
  top:70px;
  right:20px;
  width:120px;
  display:none;
}

/* ---------- HEARTS ---------- */
.heart{
  position:fixed;
  bottom:-20px;
  font-size:20px;
  animation:floatHeart linear forwards;
}
@keyframes floatHeart{
  to{transform:translateY(-110vh) scale(1.6);opacity:0;}
}
</style>
</head>

<body>

<!-- SCENE 1 -->
<div id="call" class="screen active">
  <h1>üìû Incoming Call</h1>
  <p>Anikesh</p>
  <button onclick="goTo('dialogue')">Pick up</button>
</div>

<!-- SCENE 2 -->
<div id="dialogue" class="screen">
  <p class="dialogue">
    ‚ÄúMai pahuch gaya , Mandir ke Pass hu.<br>
    Aja jldi wait krra hu.‚Äù
  </p>
  <button onclick="goTo('cutscene')">10 minit rukja bas aa rahi hu</button>
  <button onclick="goTo('cutscene')">bas 5 minit rukja plz nikl hi gayi bas</button>
</div>

<!-- SCENE 3 -->
<div id="cutscene" class="screen">
  <p>You Walks towards him‚Ä¶</p>
  <button onclick="goTo('gift')">Continue</button>
</div>

<!-- SCENE 4 -->
<div id="gift" class="screen">
  <p>‚ÄúTake this‚Ä¶‚Äù</p>
  <button onclick="goTo('box')">haina, Sundar dikhri, bahut jada,...
   Haina mai kuch lekr aya tere liye .. Ye le .. üéÅ</button>
</div>

<!-- SCENE 5 -->
<div id="box" class="screen">
  <div id="box-area">
    <div class="glow"></div>
    <div class="box-lid"></div>
    <div class="box-base"></div>
  </div>
  <button onclick="openBox()">Open üéÅ</button>
</div>

<!-- INTRO -->
<div id="intro" class="screen">
  <h1>For Srushti ‚ù§Ô∏è</h1>
  <p>A small surprise, made with love</p>
  <button onclick="startExperience()">Begin the Surprise ‚ú®</button>
</div>

<!-- CAMERA EXPERIENCE -->
<video id="camera" autoplay playsinline muted></video>
<div id="love-text">For Srushti ‚ù§Ô∏è</div>

<button id="music-btn" onclick="toggleMusic()">‚è∏ Pause Music</button>
<input id="volume" type="range" min="0" max="1" step="0.01" value="0.7">

<audio id="music" preload="auto" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<model-viewer id="rose"
  src="rose.glb"
  camera-controls
  auto-rotate
  exposure="1.5">
</model-viewer>

<script>
/* ---------- DOM ---------- */
const camera = document.getElementById('camera');
const loveText = document.getElementById('love-text');
const musicBtn = document.getElementById('music-btn');
const volume = document.getElementById('volume');
const music = document.getElementById('music');
const rose = document.getElementById('rose');

let current = document.querySelector('.screen.active');
let playing = false;

/* ---------- SCENE NAV ---------- */
function goTo(id){
  current.classList.remove('active');
  current.classList.add('exit');
  setTimeout(()=>{
    current.classList.remove('exit');
    current = document.getElementById(id);
    current.classList.add('active');
  },600);
}

/* ---------- BOX OPEN ‚Üí AUTO MUSIC ---------- */
function openBox(){
  document.getElementById('box-area').classList.add('open');

  music.volume = volume.value;
  music.currentTime = 0;

  music.play().then(()=>{
    playing = true;
    musicBtn.textContent = "‚è∏ Pause Music";
  });

  setTimeout(()=>goTo('intro'),1600);
}

/* ---------- START EXPERIENCE ---------- */
function startExperience(){
  current.classList.remove('active');

  camera.style.display='block';
  rose.style.display='block';
  loveText.style.display='block';
  musicBtn.style.display='block';
  volume.style.display='block';

  navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})
    .then(stream=>camera.srcObject=stream);
}

/* ---------- MUSIC CONTROLS ---------- */
function toggleMusic(){
  if(!playing){
    music.play();
    playing=true;
    musicBtn.textContent="‚è∏ Pause Music";
  }else{
    music.pause();
    playing=false;
    musicBtn.textContent="üéµ Play Music";
    rose.style.setProperty('--pulse-scale',1);
  }
}

volume.addEventListener('input',()=>{
  music.volume = volume.value;
});

/* ---------- ROSE PULSE ---------- */
music.addEventListener('timeupdate',()=>{
  if(!playing) return;
  const beat = Math.abs(Math.sin(music.currentTime*2.5));
  rose.style.setProperty('--pulse-scale',1 + beat*0.06);
});

/* ---------- HEARTS ---------- */
setInterval(()=>{
  const h=document.createElement('div');
  h.className='heart';
  h.textContent='üíñ';
  h.style.left=Math.random()*100+'vw';
  h.style.animationDuration=4+Math.random()*3+'s';
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),7000);
},600);
</script>

</body>
</html>
